{"body":"<blockquote>\n  <p><strong>Mod note</strong>: This question is about why Postman is not subject to CORS restrictions in the same way an XMLHttpRequest is. This question is <strong>not</strong> about how to fix a \"No 'Access-Control-Allow-Origin'...\" error.</p>\n  \n  <p><strong>Please stop posting</strong>:</p>\n  \n  <ul>\n  <li>CORS configurations for every language/framework under the sun. Instead <a href=\"https://stackoverflow.com/search?q=how+to+enable+CORS+is%3Aquestion&amp;mixed=1\">find your relevant language/framework's question</a>.</li>\n  <li>3rd party services that allow a request to circumvent CORS</li>\n  <li>Command line options for turning off CORS for various browsers</li>\n  </ul>\n</blockquote>\n\n<hr>\n\n<p>I am trying to do authorization using <a href=\"http://en.wikipedia.org/wiki/JavaScript\" rel=\"noreferrer\">JavaScript</a> by connecting to the <a href=\"http://en.wikipedia.org/wiki/Representational_state_transfer#RESTful_web_services\" rel=\"noreferrer\">RESTful</a> <a href=\"http://en.wikipedia.org/wiki/Application_programming_interface\" rel=\"noreferrer\">API</a> built-in <a href=\"https://en.wikipedia.org/wiki/Flask_%28web_framework%29\" rel=\"noreferrer\">Flask</a>. However, when I make the request, I get the following error:</p>\n\n<blockquote>\n  <p>XMLHttpRequest cannot load <a href=\"http://myApiUrl/login\" rel=\"noreferrer\">http://myApiUrl/login</a>. No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'null' is therefore not allowed access.</p>\n</blockquote>\n\n<p>I know that the API or remote resource must set the header, but why did it work when I made the request via the Chrome extension <a href=\"https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop\" rel=\"noreferrer\">Postman</a>?</p>\n\n<p>This is the request code:</p>\n\n<pre><code>$.ajax({\n    type: \"POST\",\n    dataType: 'text',\n    url: api,\n    username: 'user',\n    password: 'pass',\n    crossDomain : true,\n    xhrFields: {\n        withCredentials: true\n    }\n})\n    .done(function( data ) {\n        console.log(\"done\");\n    })\n    .fail( function(xhr, textStatus, errorThrown) {\n        alert(xhr.responseText);\n        alert(textStatus);\n    });\n</code></pre>\n","title":"Why does my JavaScript code receive a &quot;No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource&quot; error, while Postman does not?","answers":[{"score":1404,"body":"<p>If I understood it right you are doing an <a href=\"http://en.wikipedia.org/wiki/XMLHttpRequest\">XMLHttpRequest</a> to a different domain than your page is on. So the browser is blocking it as it usually allows a request in the same origin for security reasons. You need to do something different when you want to do a cross-domain request. A tutorial about how to achieve that is <em><a href=\"http://www.html5rocks.com/en/tutorials/cors/\">Using CORS</a></em>.</p>\n\n<p>When you are using postman they are not restricted by this policy. Quoted from <em><a href=\"http://developer.chrome.com/extensions/xhr.html\">Cross-Origin XMLHttpRequest</a></em>:</p>\n\n<blockquote>\n  <p>Regular web pages can use the XMLHttpRequest object to send and receive data from remote servers, but they're limited by the same origin policy. Extensions aren't so limited. An extension can talk to remote servers outside of its origin, as long as it first requests cross-origin permissions.</p>\n</blockquote>\n"},{"score":269,"body":"<blockquote>\n  <p><strong>WARNING:</strong> Using <code>Access-Control-Allow-Origin: *</code> can make your API/website vulnerable to <a href=\"https://en.wikipedia.org/wiki/Cross-site_request_forgery\" rel=\"noreferrer\">cross-site request forgery</a> (CSRF) attacks. Make certain you <a href=\"https://stackoverflow.com/questions/43154170/is-it-safe-to-enable-cors-to-for-a-public-and-readonly-webservice\">understand the risks</a> before using this code.</p>\n</blockquote>\n\n<p>It's very simple to solve if you are using <a href=\"http://en.wikipedia.org/wiki/PHP\" rel=\"noreferrer\">PHP</a>. Just add the following script in the beginning of your PHP page which handles the request:</p>\n\n<pre><code>&lt;?php header('Access-Control-Allow-Origin: *'); ?&gt;\n</code></pre>\n\n<p>If you are using <a href=\"https://en.wikipedia.org/wiki/Node-RED\" rel=\"noreferrer\">Node-red</a> you have to allow <a href=\"https://en.wikipedia.org/wiki/Cross-origin_resource_sharing\" rel=\"noreferrer\">CORS</a> in the <code>node-red/settings.js</code> file by un-commenting the following lines:</p>\n\n<pre><code>// The following property can be used to configure cross-origin resource sharing\n// in the HTTP nodes.\n// See https://github.com/troygoode/node-cors#configuration-options for\n// details on its contents. The following is a basic permissive set of options:\nhttpNodeCors: {\n origin: \"*\",\n methods: \"GET,PUT,POST,DELETE\"\n},\n</code></pre>\n\n<p>If you are using <a href=\"http://flask.pocoo.org/\" rel=\"noreferrer\">Flask</a> same as the question; you have first to install <code>flask-cors</code></p>\n\n<pre><code>$ pip install -U flask-cors\n</code></pre>\n\n<p>Then include the Flask cors in your application.</p>\n\n<pre><code>from flask_cors import CORS\n</code></pre>\n\n<p>A simple application will look like:</p>\n\n<pre><code>from flask import Flask\nfrom flask_cors import CORS\n\napp = Flask(__name__)\nCORS(app)\n\n@app.route(\"/\")\ndef helloWorld():\n  return \"Hello, cross-origin-world!\"\n</code></pre>\n\n<p>For more details, you can check the <a href=\"https://flask-cors.readthedocs.io/en/latest/\" rel=\"noreferrer\">Flask documentation</a>.</p>\n"},{"score":68,"body":"<p>Because <br/>\n<strong>$.ajax({type: &quot;POST&quot;</strong> - calls <strong>OPTIONS</strong> <br/>\n<strong>$.post(</strong> - Calls <strong>POST</strong> <br/></p>\n<p>Both are different. Postman calls &quot;POST&quot; properly, but when we call it, it will be &quot;OPTIONS&quot;.</p>\n<p><strong>For C# web services - <a href=\"https://en.wikipedia.org/wiki/ASP.NET_MVC_Framework#Apache_License_2.0_release\" rel=\"noreferrer\">Web API</a></strong></p>\n<p>Please add the following code in your <em>web.config</em> file under &lt;system.webServer&gt; tag. This will work:</p>\n<pre><code>&lt;httpProtocol&gt;\n    &lt;customHeaders&gt;\n        &lt;add name=&quot;Access-Control-Allow-Origin&quot; value=&quot;*&quot; /&gt;\n    &lt;/customHeaders&gt;\n&lt;/httpProtocol&gt;\n</code></pre>\n<p>Please make sure you are not doing any mistake in the Ajax call</p>\n<h3>jQuery</h3>\n<pre><code>$.ajax({\n    url: 'http://mysite.microsoft.sample.xyz.com/api/mycall',\n    headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n    },\n    type: &quot;POST&quot;, /* or type:&quot;GET&quot; or type:&quot;PUT&quot; */\n    dataType: &quot;json&quot;,\n    data: {\n    },\n    success: function (result) {\n        console.log(result);\n    },\n    error: function () {\n        console.log(&quot;error&quot;);\n    }\n});\n</code></pre>\n<p><strong>Note:</strong> If you are looking for downloading content <strong>from a third-party website</strong> then <strong>this will not help you</strong>.  You can try the following code, but not JavaScript.</p>\n<pre><code>System.Net.WebClient wc = new System.Net.WebClient();\nstring str = wc.DownloadString(&quot;http://mysite.microsoft.sample.xyz.com/api/mycall&quot;);\n</code></pre>\n"},{"score":17,"body":"<p>In the below investigation as API, I use <a href=\"http://example.com\" rel=\"noreferrer\">http://example.com</a> instead of <a href=\"http://myApiUrl/login\" rel=\"noreferrer\">http://myApiUrl/login</a> from your question, because this first one working.</p>\n\n<p>I assume that your page is on <a href=\"http://my-site.local:8088\" rel=\"noreferrer\">http://my-site.local:8088</a><a href=\"https://stackoverflow.com/a/55584963/860099\">.</a></p>\n\n<p>The reason why you see different results is that Postman:</p>\n\n<ul>\n<li>set header <code>Host=example.com</code> (your API)</li>\n<li>NOT set header <code>Origin</code></li>\n</ul>\n\n<p>This is similar to browsers' way of sending requests when the site and API has the same domain (browsers also set the header item <code>Referer=http://my-site.local:8088</code>, however I don't see it in Postman). <strong>When <code>Origin</code> header is <em>not</em> set, usually servers allow such requests by default.</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/XLrRg.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XLrRg.png\" alt=\"Enter image description here\"></a></p>\n\n<p>This is the standard way how Postman sends requests. But a browser sends requests differently when <strong>your site and API have different domains</strong>, and then <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS\" rel=\"noreferrer\">CORS</a> occurs and the browser automatically:</p>\n\n<ul>\n<li>sets header <code>Host=example.com</code> (yours as API)</li>\n<li>sets header <code>Origin=http://my-site.local:8088</code> (your site)</li>\n</ul>\n\n<p>(The header <code>Referer</code> has the same value as <code>Origin</code>). And now in Chrome's <em>Console &amp; Networks</em> tab you will see:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oZkcL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/oZkcL.png\" alt=\"Enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/8ITev.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/8ITev.png\" alt=\"Enter image description here\"></a></p>\n\n<p>When you have <strong><code>Host != Origin</code></strong> this is CORS, and when the server detects such a request, it usually <strong>blocks it by default</strong>.</p>\n\n<p><code>Origin=null</code> is set when you open HTML content from a local directory, and it sends a request. The same situation is when you send a request inside an <code>&lt;iframe&gt;</code>, like in the below snippet (but here the <code>Host</code> header is not set at all) - in general, everywhere the HTML specification says opaque origin, you can translate that to <code>Origin=null</code>. More information about this you can find <a href=\"https://stackoverflow.com/questions/42239643/when-do-browsers-send-the-origin-header-when-do-browsers-set-the-origin-to-null/42242802#42242802\">here</a>.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>fetch('http://example.com/api', {method: 'POST'});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Look on chrome-console &gt; network tab</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>If you do not use a simple CORS request, usually the browser automatically also sends an OPTIONS request before sending the main request - more information is <a href=\"https://stackoverflow.com/questions/10093053/access-control-request-headers-is-added-to-header-in-ajax-request-with-jquery/55584963#55584963\">here</a>. The snippet below shows it:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>fetch('http://example.com/api', {\r\n  method: 'POST',\r\n  headers: { 'Content-Type': 'application/json'}\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>Look in chrome-console -&gt; network tab to 'api' request.\r\nThis is the OPTIONS request (the server does not allow sending a POST request)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>You can change the configuration of your server to allow CORS requests.</p>\n\n<p>Here is an example configuration which turns on <strong>CORS on nginx</strong> (nginx.conf file) - be very careful with setting <code>always/\"$http_origin\"</code> for nginx and <code>\"*\"</code> for Apache - this will unblock CORS from any domain.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>location ~ ^/index\\.php(/|$) {\r\n   ...\r\n    add_header 'Access-Control-Allow-Origin' \"$http_origin\" always;\r\n    add_header 'Access-Control-Allow-Credentials' 'true' always;\r\n    if ($request_method = OPTIONS) {\r\n        add_header 'Access-Control-Allow-Origin' \"$http_origin\"; # DO NOT remove THIS LINES (doubled with outside 'if' above)\r\n        add_header 'Access-Control-Allow-Credentials' 'true';\r\n        add_header 'Access-Control-Max-Age' 1728000; # cache preflight value for 20 days\r\n        add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';\r\n        add_header 'Access-Control-Allow-Headers' 'My-First-Header,My-Second-Header,Authorization,Content-Type,Accept,Origin';\r\n        add_header 'Content-Length' 0;\r\n        add_header 'Content-Type' 'text/plain charset=UTF-8';\r\n        return 204;\r\n    }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Here is an example configuration which turns on <strong>CORS on Apache</strong> (.htaccess file)</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code># ------------------------------------------------------------------------------\r\n# | Cross-domain Ajax requests                                                 |\r\n# ------------------------------------------------------------------------------\r\n\r\n# Enable cross-origin Ajax requests.\r\n# http://code.google.com/p/html5security/wiki/CrossOriginRequestSecurity\r\n# http://enable-cors.org/\r\n\r\n# &lt;IfModule mod_headers.c&gt;\r\n#    Header set Access-Control-Allow-Origin \"*\"\r\n# &lt;/IfModule&gt;\r\n\r\n# Header set Header set Access-Control-Allow-Origin \"*\"\r\n# Header always set Access-Control-Allow-Credentials \"true\"\r\n\r\nAccess-Control-Allow-Origin \"http://your-page.com:80\"\r\nHeader always set Access-Control-Allow-Methods \"POST, GET, OPTIONS, DELETE, PUT\"\r\nHeader always set Access-Control-Allow-Headers \"My-First-Header,My-Second-Header,Authorization, content-type, csrf-token\"</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"score":12,"body":"<p>Applying a CORS restriction is a security feature defined by a server and implemented by a <strong>browser</strong>. </p>\n\n<blockquote>\n  <p>The browser looks at the CORS policy of the server and respects it.</p>\n</blockquote>\n\n<p>However, the Postman tool does not bother about the CORS policy of the server.</p>\n\n<p>That is why the CORS error appears in the browser, but not in Postman.</p>\n"},{"score":-1,"body":"<p>If you use .NET as your middle tier, check the route attribute clearly, for example,</p>\n\n<p>I had issue when it was like this, </p>\n\n<pre><code>[Route(\"something/{somethingLong: long}\")] //Space.\n</code></pre>\n\n<p>Fixed it by this, </p>\n\n<pre><code>[Route(\"something/{somethingLong:long}\")] //No space\n</code></pre>\n"},{"score":8,"body":"<p>Encountered the same error in different use case. </p>\n\n<p><strong>Use Case:</strong> In chrome when tried to call Spring <strong>REST</strong> end point in angular.</p>\n\n<p><a href=\"https://i.stack.imgur.com/1hYm6.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/1hYm6.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Solution:</strong> Add <strong>@CrossOrigin(\"*\")</strong> annotation on top of respective Controller Class.</p>\n\n<p><a href=\"https://i.stack.imgur.com/xiHSO.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xiHSO.png\" alt=\"enter image description here\"></a></p>\n"},{"score":0,"body":"<p>Only for .NET Core Web API project, add following changes:</p>\n\n<ol>\n<li>Add the following code after the <code>services.AddMvc()</code> line in the <code>ConfigureServices()</code> method of the Startup.cs file:</li>\n</ol>\n\n<pre><code>services.AddCors(allowsites=&gt;{allowsites.AddPolicy(\"AllowOrigin\", options =&gt; options.AllowAnyOrigin());\n            });\n</code></pre>\n\n<ol start=\"2\">\n<li>Add the following code after <code>app.UseMvc()</code> line in the <code>Configure()</code> method of the Startup.cs file:</li>\n</ol>\n\n<pre><code>app.UseCors(options =&gt; options.AllowAnyOrigin());\n</code></pre>\n\n<ol start=\"3\">\n<li>Open the controller which you want to access outside the domain and add this following attribute at the controller level:</li>\n</ol>\n\n<pre><code>[EnableCors(\"AllowOrigin\")]\n</code></pre>\n"},{"score":3,"body":"<p>If you want to bypass that restriction when fetching the contents with fetch API or XMLHttpRequest in javascript, you can use a proxy server so that it sets the header <code>Access-Control-Allow-Origin</code> to <code>*</code>.</p>\n<pre><code>const express = require('express');\nconst request = require('request');\n\nconst app = express();\n\napp.use((req, res, next) =&gt; {\n  res.header('Access-Control-Allow-Origin', '*');\n  next();\n});\n\napp.get('/fetch', (req, res) =&gt; {\n  request(\n    { url: req.query.url },\n    (error, response, body) =&gt; {\n      if (error || response.statusCode !== 200) {\n        return res.status(500).send('error');\n      }\n      res.send(body);\n    }\n  )\n});\n\nconst PORT = process.env.PORT || 3000;\napp.listen(PORT, () =&gt; console.log(`listening on ${PORT}`));\n</code></pre>\n<p>Above is a sample code( node Js required ) which can act as a proxy server. For eg: If I want to fetch <code>https://www.google.com</code> normally a CORS error is thrown, but now since the request is sent through the proxy server hosted locally at port 3000, the proxy server adds the <code>Access-Control-Allow-Origin</code> header in the response and there wont be any issue.</p>\n<p>Send a GET request to http://localhost:3000/fetch?url=<code>Your URL here</code> , instead of directly sending the request to the URl you want to fetch.</p>\n<p><code>Your URL here</code> stands for the URL you wish to fetch eg: <code>https://www.google.com</code></p>\n"},{"score":-1,"body":"<p>Are you using Webfonts from Google, Typekit, etc?\nThere are multiple ways you could use Webfonts like @font-face or CSS3 methods, some browsers like Firefox &amp; IE may refuse to embed the font when it’s coming from some non-standard 3rd party URL (like your blog) for same security reason.</p>\n<p>In order to fix an issue for your WordPress blog, just put below into your .htaccess file.</p>\n<pre><code>&lt;IfModule mod_headers.c&gt;\n  &lt;FilesMatch &quot;\\.(ttf|ttc|otf|eot|woff|woff2|font.css|css|js)$&quot;&gt;\n  Header set Access-Control-Allow-Origin &quot;*&quot;\n  &lt;/FilesMatch&gt;\n&lt;/IfModule&gt;\n</code></pre>\n<p>Source : <a href=\"https://crunchify.com/how-to-fix-access-control-allow-origin-issue-for-your-https-enabled-wordpress-site-and-maxcdn/\" rel=\"nofollow noreferrer\">https://crunchify.com/how-to-fix-access-control-allow-origin-issue-for-your-https-enabled-wordpress-site-and-maxcdn/</a></p>\n"}],"score":2631}