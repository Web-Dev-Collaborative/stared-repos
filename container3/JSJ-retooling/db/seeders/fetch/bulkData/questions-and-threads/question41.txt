{"body":"<p>I would like to upload a file asynchronously with jQuery. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function () {\r\n    $(\"#uploadbutton\").click(function () {\r\n        var filename = $(\"#file\").val();\r\n\r\n        $.ajax({\r\n            type: \"POST\",\r\n            url: \"addFile.do\",\r\n            enctype: 'multipart/form-data',\r\n            data: {\r\n                file: filename\r\n            },\r\n            success: function () {\r\n                alert(\"Data Uploaded: \");\r\n            }\r\n        });\r\n    });\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;span&gt;File&lt;/span&gt;\r\n&lt;input type=\"file\" id=\"file\" name=\"file\" size=\"10\"/&gt;\r\n&lt;input id=\"uploadbutton\" type=\"button\" value=\"Upload\"/&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Instead of the file being uploaded, I am only getting the filename. What can I do to fix this problem?</p>\n","title":"How can I upload files asynchronously?","answers":[{"score":104,"body":"<p>Note: This answer is outdated, it is now possible to upload files using XHR.</p>\n\n<hr>\n\n<p>You cannot upload files using <a href=\"http://en.wikipedia.org/wiki/XMLHttpRequest\" rel=\"noreferrer\">XMLHttpRequest</a> (Ajax). You can simulate the effect using an iframe or Flash. The excellent <a href=\"http://malsup.com/jquery/form/\" rel=\"noreferrer\">jQuery Form Plugin</a> that posts your files through an iframe to get the effect.</p>\n"},{"score":290,"body":"<h2>2019 Update: It <em>still</em> depends on the browsers <em>your</em> demographic uses.</h2>\n\n<p>An important thing to understand with the \"new\" HTML5 <code>file</code> API is that it <a href=\"http://caniuse.com/fileapi\" rel=\"noreferrer\">wasn't supported until IE 10</a>. If the specific market you're aiming at has a higher-than-average propensity toward older versions of Windows, you might not have access to it.</p>\n\n<p>As of 2017, about 5% of browsers are one of IE 6, 7, 8 or 9. If you head into a big corporation (e.g., this is a B2B tool, or something you're delivering for training) that number can skyrocket. In 2016, I dealt with a company using IE8 on over 60% of their machines.</p>\n\n<p>It's 2019 as of this edit, almost 11 years after my initial answer. IE9 and lower are <em>globally</em> around the 1% mark but there are still clusters  of higher usage.</p>\n\n<p>The important take-away from this —whatever the feature— is, <strong>check what browser <em>your</em> users use</strong>. If you don't, you'll learn a quick and painful lesson in why \"works for me\" isn't good enough in a deliverable to a client. <a href=\"https://caniuse.com/\" rel=\"noreferrer\">caniuse</a> is a useful tool but note where they get their demographics from. They may not align with yours. This is never truer than enterprise environments.</p>\n\n<p>My answer from 2008 follows.</p>\n\n<hr>\n\n<p>However, there are viable non-JS methods of file uploads. You can create an iframe on the page (that you hide with CSS) and then target your form to post to that iframe. The main page doesn't need to move.</p>\n\n<p>It's a \"real\" post so it's not wholly interactive. If you need status you need something server-side to process that. This varies massively depending on your server. <a href=\"http://en.wikipedia.org/wiki/ASP.NET\" rel=\"noreferrer\">ASP.NET</a> has nicer mechanisms. PHP plain fails, but you can use <a href=\"http://en.wikipedia.org/wiki/Perl\" rel=\"noreferrer\">Perl</a> or Apache modifications to get around it.</p>\n\n<p>If you need multiple file-uploads, it's best to do each file one at a time (to overcome maximum file upload limits). Post the first form to the iframe, monitor its progress using the above and when it has finished, post the second form to the iframe, and so on.</p>\n\n<p>Or use a Java/Flash solution. They're a lot more flexible in what they can do with their posts...</p>\n"},{"score":33,"body":"<p>A solution I found was to have the <code>&lt;form&gt;</code> target a hidden iFrame. The iFrame can then run JS to display to the user that it's complete (on page load).</p>\n"},{"score":115,"body":"<p>I recommend using the <a href=\"http://fineuploader.com/demos.html\" rel=\"noreferrer\">Fine Uploader</a> plugin for this purpose. Your <code>JavaScript</code> code would be:</p>\n\n<pre><code>$(document).ready(function() {\n  $(\"#uploadbutton\").jsupload({\n    action: \"addFile.do\",\n    onComplete: function(response){\n      alert( \"server response: \" + response);\n    }\n  });\n});\n</code></pre>\n"},{"score":33,"body":"<p><a href=\"http://www.williambharding.com/blog/rails/rails-ajax-image-uploading-made-simple-with-jquery/\" rel=\"noreferrer\">I've written this up in a Rails environment</a>.  It's only about five lines of JavaScript, if you use the lightweight jQuery-form plugin.</p>\n\n<p>The challenge is in getting AJAX upload working as the standard <code>remote_form_for</code> doesn't understand multi-part form submission. It's not going to send the file data Rails seeks back with the AJAX request.   </p>\n\n<p>That's where the jQuery-form plugin comes into play.  </p>\n\n<p>Here’s the Rails code for it:</p>\n\n<pre><code>&lt;% remote_form_for(:image_form, \n                   :url =&gt; { :controller =&gt; \"blogs\", :action =&gt; :create_asset }, \n                   :html =&gt; { :method =&gt; :post, \n                              :id =&gt; 'uploadForm', :multipart =&gt; true }) \n                                                                        do |f| %&gt;\n Upload a file: &lt;%= f.file_field :uploaded_data %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here’s the associated JavaScript:</p>\n\n<pre><code>$('#uploadForm input').change(function(){\n $(this).parent().ajaxSubmit({\n  beforeSubmit: function(a,f,o) {\n   o.dataType = 'json';\n  },\n  complete: function(XMLHttpRequest, textStatus) {\n   // XMLHttpRequest.responseText will contain the URL of the uploaded image.\n   // Put it in an image element you create, or do with it what you will.\n   // For example, if you have an image elemtn with id \"my_image\", then\n   //  $('#my_image').attr('src', XMLHttpRequest.responseText);\n   // Will set that image tag to display the uploaded image.\n  },\n });\n});\n</code></pre>\n\n<p>And here’s the Rails controller action, pretty vanilla:</p>\n\n<pre><code> @image = Image.new(params[:image_form])\n @image.save\n render :text =&gt; @image.public_filename\n</code></pre>\n\n<p>I’ve been using this for the past few weeks with Bloggity, and it’s worked like a champ.</p>\n"},{"score":86,"body":"<p>This <a href=\"https://github.com/jfeldstein/jQuery.AjaxFileUpload.js\">AJAX file upload jQuery plugin</a> uploads the file somehwere, and passes the\nresponse to a callback, nothing else. </p>\n\n<ul>\n<li>It does not depend on specific HTML, just give it a <code>&lt;input type=\"file\"&gt;</code></li>\n<li>It does not require your server to respond in any particular way</li>\n<li>It does not matter how many files you use, or where they are on the page</li>\n</ul>\n\n<p>-- Use as little as --</p>\n\n<pre><code>$('#one-specific-file').ajaxfileupload({\n  'action': '/upload.php'\n});\n</code></pre>\n\n<p>-- or as much as --</p>\n\n<pre><code>$('input[type=\"file\"]').ajaxfileupload({\n  'action': '/upload.php',\n  'params': {\n    'extra': 'info'\n  },\n  'onComplete': function(response) {\n    console.log('custom handler for file:');\n    alert(JSON.stringify(response));\n  },\n  'onStart': function() {\n    if(weWantedTo) return false; // cancels upload\n  },\n  'onCancel': function() {\n    console.log('no file selected');\n  }\n});\n</code></pre>\n"},{"score":2552,"body":"<p>With <a href=\"http://en.wikipedia.org/wiki/HTML5\" rel=\"noreferrer\">HTML5</a> you can make file uploads with Ajax and jQuery. Not only that, you can do file validations (name, size, and MIME type) or handle the progress event with the HTML5 progress tag (or a div). Recently I had to make a file uploader, but I didn't want to use <a href=\"http://en.wikipedia.org/wiki/Adobe_Flash\" rel=\"noreferrer\">Flash</a> nor Iframes or plugins and after some research I came up with the solution.</p>\n\n<p>The HTML:</p>\n\n<pre><code>&lt;form enctype=\"multipart/form-data\"&gt;\n    &lt;input name=\"file\" type=\"file\" /&gt;\n    &lt;input type=\"button\" value=\"Upload\" /&gt;\n&lt;/form&gt;\n&lt;progress&gt;&lt;/progress&gt;\n</code></pre>\n\n<p>First, you can do some validation if you want. For example, in the <code>.on('change')</code> event of the file:</p>\n\n<pre><code>$(':file').on('change', function () {\n  var file = this.files[0];\n\n  if (file.size &gt; 1024) {\n    alert('max upload size is 1k');\n  }\n\n  // Also see .name, .type\n});\n</code></pre>\n\n<p>Now the <code>$.ajax()</code> submit with the button's click:</p>\n\n<pre><code>$(':button').on('click', function () {\n  $.ajax({\n    // Your server script to process the upload\n    url: 'upload.php',\n    type: 'POST',\n\n    // Form data\n    data: new FormData($('form')[0]),\n\n    // Tell jQuery not to process data or worry about content-type\n    // You *must* include these options!\n    cache: false,\n    contentType: false,\n    processData: false,\n\n    // Custom XMLHttpRequest\n    xhr: function () {\n      var myXhr = $.ajaxSettings.xhr();\n      if (myXhr.upload) {\n        // For handling the progress of the upload\n        myXhr.upload.addEventListener('progress', function (e) {\n          if (e.lengthComputable) {\n            $('progress').attr({\n              value: e.loaded,\n              max: e.total,\n            });\n          }\n        }, false);\n      }\n      return myXhr;\n    }\n  });\n});\n</code></pre>\n\n<p>As you can see, with HTML5 (and some research) file uploading not only becomes possible but super easy. Try it with <a href=\"http://en.wikipedia.org/wiki/Google_Chrome\" rel=\"noreferrer\">Google Chrome</a> as some of the HTML5 components of the examples aren't available in every browser.</p>\n"},{"score":63,"body":"<p>I have been using the below script to upload images which happens to work fine.</p>\n\n<h1>HTML</h1>\n\n<pre><code>&lt;input id=\"file\" type=\"file\" name=\"file\"/&gt;\n&lt;div id=\"response\"&gt;&lt;/div&gt;\n</code></pre>\n\n<h1>JavaScript</h1>\n\n<pre><code>jQuery('document').ready(function(){\n    var input = document.getElementById(\"file\");\n    var formdata = false;\n    if (window.FormData) {\n        formdata = new FormData();\n    }\n    input.addEventListener(\"change\", function (evt) {\n        var i = 0, len = this.files.length, img, reader, file;\n\n        for ( ; i &lt; len; i++ ) {\n            file = this.files[i];\n\n            if (!!file.type.match(/image.*/)) {\n                if ( window.FileReader ) {\n                    reader = new FileReader();\n                    reader.onloadend = function (e) {\n                        //showUploadedItem(e.target.result, file.fileName);\n                    };\n                    reader.readAsDataURL(file);\n                }\n\n                if (formdata) {\n                    formdata.append(\"image\", file);\n                    formdata.append(\"extra\",'extra-data');\n                }\n\n                if (formdata) {\n                    jQuery('div#response').html('&lt;br /&gt;&lt;img src=\"ajax-loader.gif\"/&gt;');\n\n                    jQuery.ajax({\n                        url: \"upload.php\",\n                        type: \"POST\",\n                        data: formdata,\n                        processData: false,\n                        contentType: false,\n                        success: function (res) {\n                         jQuery('div#response').html(\"Successfully uploaded\");\n                        }\n                    });\n                }\n            }\n            else\n            {\n                alert('Not a vaild image!');\n            }\n        }\n\n    }, false);\n});\n</code></pre>\n\n<h1>Explanation</h1>\n\n<p>I use response <code>div</code> to show the uploading animation and response after upload is done.</p>\n\n<p>Best part is you can send extra data such as ids &amp; etc with the file when you use this script. I have mention it <code>extra-data</code> as in the script.</p>\n\n<p>At the PHP level this will work as normal file upload. extra-data can be retrieved as <code>$_POST</code> data.</p>\n\n<p>Here you are not using a plugin and stuff. You can change the code as you want. You are not blindly coding here. This is the core functionality of any jQuery file upload. Actually Javascript.</p>\n"},{"score":53,"body":"<p>You can do it in vanilla JavaScript pretty easily. Here's a snippet from my current project:</p>\n\n<pre><code>var xhr = new XMLHttpRequest();\nxhr.upload.onprogress = function(e) {\n    var percent = (e.position/ e.totalSize);\n    // Render a pretty progress bar\n};\nxhr.onreadystatechange = function(e) {\n    if(this.readyState === 4) {\n        // Handle file upload complete\n    }\n};\nxhr.open('POST', '/upload', true);\nxhr.setRequestHeader('X-FileName',file.name); // Pass the filename along\nxhr.send(file);\n</code></pre>\n"},{"score":26,"body":"<p>jQuery <a href=\"http://www.uploadify.com/download/\">Uploadify</a> is another good plugin which I have used before to upload files. The JavaScript code is as simple as the following: code. However, the new version does not work in Internet&nbsp;Explorer.</p>\n\n<pre><code>$('#file_upload').uploadify({\n    'swf': '/public/js/uploadify.swf',\n    'uploader': '/Upload.ashx?formGuid=' + $('#formGuid').val(),\n    'cancelImg': '/public/images/uploadify-cancel.png',\n    'multi': true,\n    'onQueueComplete': function (queueData) {\n        // ...\n    },\n    'onUploadStart': function (file) {\n        // ...\n    }\n});\n</code></pre>\n\n<p>I have done a lot of searching and I have come to another solution for uploading files without any plugin and only with ajax. The solution is as below:</p>\n\n<pre><code>$(document).ready(function () {\n    $('#btn_Upload').live('click', AjaxFileUpload);\n});\n\nfunction AjaxFileUpload() {\n    var fileInput = document.getElementById(\"#Uploader\");\n    var file = fileInput.files[0];\n    var fd = new FormData();\n    fd.append(\"files\", file);\n    var xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", 'Uploader.ashx');\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState == 4) {\n             alert('success');\n        }\n        else if (uploadResult == 'success')\n            alert('error');\n    };\n    xhr.send(fd);\n}\n</code></pre>\n"},{"score":32,"body":"<p>Simple Ajax Uploader is another option:</p>\n\n<p><a href=\"https://github.com/LPology/Simple-Ajax-Uploader\" rel=\"noreferrer\">https://github.com/LPology/Simple-Ajax-Uploader</a></p>\n\n<ul>\n<li>Cross-browser -- works in IE7+, Firefox, Chrome, Safari, Opera</li>\n<li>Supports multiple, concurrent uploads -- even in non-HTML5 browsers</li>\n<li>No flash or external CSS -- just one 5Kb Javascript file</li>\n<li>Optional, built-in support for fully cross-browser progress bars (using PHP's APC extension)</li>\n<li>Flexible and highly customizable -- use any element as upload button, style your own progress indicators</li>\n<li>No forms required, just provide an element that will serve as upload button</li>\n<li>MIT license -- free to use in commercial project</li>\n</ul>\n\n<p>Example usage:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var uploader = new ss.SimpleUpload({\n    button: $('#uploadBtn'), // upload button\n    url: '/uploadhandler', // URL of server-side upload handler\n    name: 'userfile', // parameter name of the uploaded file\n    onSubmit: function() {\n        this.setProgressBar( $('#progressBar') ); // designate elem as our progress bar\n    },\n    onComplete: function(file, response) {\n        // do whatever after upload is finished\n    }\n});\n</code></pre>\n"},{"score":10,"body":"<p>You can use</p>\n\n<pre><code>$(function() {\n    $(\"#file_upload_1\").uploadify({\n        height        : 30,\n        swf           : '/uploadify/uploadify.swf',\n        uploader      : '/uploadify/uploadify.php',\n        width         : 120\n    });\n});\n</code></pre>\n\n<p><a href=\"http://www.uploadify.com/demos/\" rel=\"noreferrer\">Demo</a></p>\n"},{"score":15,"body":"<p>To upload file asynchronously with Jquery use below steps:</p>\n<p><strong>step 1</strong> In your project open Nuget manager and add package (jquery fileupload(only you need to write it in search box it will come up and install it.))\nURL: <a href=\"https://github.com/blueimp/jQuery-File-Upload\" rel=\"noreferrer\">https://github.com/blueimp/jQuery-File-Upload</a></p>\n<p><strong>step 2</strong> Add below scripts in the HTML files, which are already added to the project by running above package:</p>\n<blockquote>\n<p>jquery.ui.widget.js</p>\n<p>jquery.iframe-transport.js</p>\n<p>jquery.fileupload.js</p>\n</blockquote>\n<p><strong>step 3</strong>  Write file upload control as per below code:</p>\n<pre><code>&lt;input id=&quot;upload&quot; name=&quot;upload&quot; type=&quot;file&quot; /&gt;\n</code></pre>\n<p><strong>step 4</strong>  write a js method as uploadFile as below:</p>\n<pre><code> function uploadFile(element) {\n    \n            $(element).fileupload({\n    \n                dataType: 'json',\n                url: '../DocumentUpload/upload',\n                autoUpload: true,\n                add: function (e, data) {           \n                  // write code for implementing, while selecting a file. \n                  // data represents the file data. \n                  //below code triggers the action in mvc controller\n                  data.formData =\n                                    {\n                                     files: data.files[0]\n                                    };\n                  data.submit();\n                },\n                done: function (e, data) {          \n                   // after file uploaded\n                },\n                progress: function (e, data) {\n                    \n                   // progress\n                },\n                fail: function (e, data) {\n                    \n                   //fail operation\n                },\n                stop: function () {\n                    \n                  code for cancel operation\n                }\n            });\n        \n        };\n</code></pre>\n<p><strong>step 5</strong> In ready function call element file upload to initiate the process as per below:</p>\n<pre><code>$(document).ready(function()\n{\n    uploadFile($('#upload'));\n\n});\n</code></pre>\n<p><strong>step 6</strong> Write MVC controller and Action as per below:</p>\n<pre><code>public class DocumentUploadController : Controller\n    {       \n        \n        [System.Web.Mvc.HttpPost]\n        public JsonResult upload(ICollection&lt;HttpPostedFileBase&gt; files)\n        {\n            bool result = false;\n\n            if (files != null || files.Count &gt; 0)\n            {\n                try\n                {\n                    foreach (HttpPostedFileBase file in files)\n                    {\n                        if (file.ContentLength == 0)\n                            throw new Exception(&quot;Zero length file!&quot;);                       \n                        else \n                            //code for saving a file\n\n                    }\n                }\n                catch (Exception)\n                {\n                    result = false;\n                }\n            }\n\n\n            return new JsonResult()\n                {\n                    Data=result\n                };\n\n\n        }\n\n    }\n</code></pre>\n"},{"score":9,"body":"<p>Convert file to base64 using |HTML5's <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/FileReader#readAsDataURL%28%29\">readAsDataURL()</a> or <a href=\"http://scotch.io/quick-tips/js/how-to-encode-and-decode-strings-with-base64-in-javascript\">some base64 encoder</a>. \n<a href=\"http://jsfiddle.net/eliseosoto/JHQnk/\">Fiddle here</a></p>\n\n<pre><code>var reader = new FileReader();\n\n        reader.onload = function(readerEvt) {\n            var binaryString = readerEvt.target.result;\n            document.getElementById(\"base64textarea\").value = btoa(binaryString);\n        };\n\n        reader.readAsBinaryString(file);\n</code></pre>\n\n<p>Then to retrieve:</p>\n\n<pre><code>window.open(\"data:application/octet-stream;base64,\" + base64);\n</code></pre>\n"},{"score":45,"body":"<p>The simplest and most robust way I have done this in the past, is to simply target a hidden iFrame tag with your form - then it will submit within the iframe without reloading the page.</p>\n\n<p>That is if you don't want to use a plugin, JavaScript or any other forms of \"magic\" other than HTML.  Of course you can combine this with JavaScript or what have you...</p>\n\n<pre><code>&lt;form target=\"iframe\" action=\"\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n    &lt;input name=\"file\" type=\"file\" /&gt;\n    &lt;input type=\"button\" value=\"Upload\" /&gt;\n&lt;/form&gt;\n\n&lt;iframe name=\"iframe\" id=\"iframe\" style=\"display:none\" &gt;&lt;/iframe&gt;\n</code></pre>\n\n<p>You can also read the contents of the iframe <code>onLoad</code> for server errors or success responses and then output that to user.</p>\n\n<p><strong>Chrome, iFrames, and onLoad</strong> </p>\n\n<p><em>-note- you only need to keep reading if you are interested in how to setup a UI blocker when doing uploading/downloading</em></p>\n\n<p>Currently Chrome doesn't trigger the onLoad event for the iframe when it's used to transfer files.  Firefox, IE, and Edge all fire the onload event for file transfers.</p>\n\n<p>The only solution that I found works for Chrome was to use a cookie.  </p>\n\n<p>To do that basically when the upload/download is started:</p>\n\n<ul>\n<li>[Client Side] Start an interval to look for the existence of a cookie</li>\n<li>[Server Side] Do whatever you need to with the file data</li>\n<li>[Server Side] Set cookie for client side interval</li>\n<li>[Client Side] Interval sees the cookie and uses it like the onLoad event.  For example you can start a UI blocker and then onLoad ( or when cookie is made )  you remove the UI blocker.</li>\n</ul>\n\n<p>Using a cookie for this is ugly but it works.  </p>\n\n<p>I made a jQuery plugin to handle this issue for Chrome when downloading, you can find here</p>\n\n<p><a href=\"https://github.com/ArtisticPhoenix/jQuery-Plugins/blob/master/iDownloader.js\" rel=\"noreferrer\">https://github.com/ArtisticPhoenix/jQuery-Plugins/blob/master/iDownloader.js</a></p>\n\n<p>The same basic principal applies to uploading, as well.</p>\n\n<p>To use the downloader  ( include the JS, obviously )</p>\n\n<pre><code> $('body').iDownloader({\n     \"onComplete\" : function(){\n          $('#uiBlocker').css('display', 'none'); //hide ui blocker on complete\n     }\n });\n\n $('somebuttion').click( function(){\n      $('#uiBlocker').css('display', 'block'); //block the UI\n      $('body').iDownloader('download', 'htttp://example.com/location/of/download');\n });\n</code></pre>\n\n<p>And on the server side, just before transferring the file data, create the cookie</p>\n\n<pre><code> setcookie('iDownloader', true, time() + 30, \"/\");\n</code></pre>\n\n<p>The plugin will see the cookie, and then trigger the <code>onComplete</code> callback.</p>\n"},{"score":48,"body":"<p>You can upload simply with jQuery <code>.ajax()</code>.</p>\n\n<p>HTML:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;form id=\"upload-form\"&gt;\n    &lt;div&gt;\n        &lt;label for=\"file\"&gt;File:&lt;/label&gt;\n        &lt;input type=\"file\" id=\"file\" name=\"file\" /&gt;\n        &lt;progress class=\"progress\" value=\"0\" max=\"100\"&gt;&lt;/progress&gt;\n    &lt;/div&gt;\n    &lt;hr /&gt;\n    &lt;input type=\"submit\" value=\"Submit\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>CSS</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>.progress { display: none; }\n</code></pre>\n\n<p>Javascript:</p>\n\n<pre class=\"lang-javascript prettyprint-override\"><code>$(document).ready(function(ev) {\n    $(\"#upload-form\").on('submit', (function(ev) {\n        ev.preventDefault();\n        $.ajax({\n            xhr: function() {\n                var progress = $('.progress'),\n                    xhr = $.ajaxSettings.xhr();\n\n                progress.show();\n\n                xhr.upload.onprogress = function(ev) {\n                    if (ev.lengthComputable) {\n                        var percentComplete = parseInt((ev.loaded / ev.total) * 100);\n                        progress.val(percentComplete);\n                        if (percentComplete === 100) {\n                            progress.hide().val(0);\n                        }\n                    }\n                };\n\n                return xhr;\n            },\n            url: 'upload.php',\n            type: 'POST',\n            data: new FormData(this),\n            contentType: false,\n            cache: false,\n            processData: false,\n            success: function(data, status, xhr) {\n                // ...\n            },\n            error: function(xhr, status, error) {\n                // ...\n            }\n       });\n    }));\n});\n</code></pre>\n"},{"score":99,"body":"<p>Wrapping up for future readers.</p>\n\n<h1>Asynchronous File Upload</h1>\n\n<h2>With HTML5</h2>\n\n<p>You can upload files <strong>with jQuery</strong> using the <code>$.ajax()</code> method if <a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/Using_FormData_Objects\" rel=\"noreferrer\">FormData</a> and the <a href=\"https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications\" rel=\"noreferrer\">File API</a> are supported (both HTML5 features). </p>\n\n<p>You can also send files <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Submitting_forms_and_uploading_files\" rel=\"noreferrer\">without FormData</a> but either way the File API must be present to process files in such a way that they can be sent with <em>XMLHttpRequest</em> (Ajax).</p>\n\n<pre><code>$.ajax({\n  url: 'file/destination.html', \n  type: 'POST',\n  data: new FormData($('#formWithFiles')[0]), // The form with the file inputs.\n  processData: false,\n  contentType: false                    // Using FormData, no need to process data.\n}).done(function(){\n  console.log(\"Success: Files sent!\");\n}).fail(function(){\n  console.log(\"An error occurred, the files couldn't be sent!\");\n});\n</code></pre>\n\n<p>For a quick, pure JavaScript (<strong>no jQuery</strong>) example see \"<a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/Using_FormData_Objects#Sending_files_using_a_FormData_object\" rel=\"noreferrer\">Sending files using a FormData object</a>\".</p>\n\n<h2>Fallback</h2>\n\n<p>When HTML5 isn't supported (no <em>File API</em>) the only other pure JavaScript solution (no <em>Flash</em> or any other browser plugin) is the <strong>hidden iframe</strong> technique, which allows to emulate an asynchronous request without using the <em>XMLHttpRequest</em> object.</p>\n\n<p>It consists of setting an iframe as the target of the form with the file inputs. When the user submits a request is made and the files are uploaded but the response is displayed inside the iframe instead of re-rendering the main page. Hiding the iframe makes the whole process transparent to the user and emulates an asynchronous request.</p>\n\n<p>If done properly it should work virtually on any browser, but it has some caveats as how to obtain the response from the iframe. </p>\n\n<p>In this case you may prefer to use a wrapper plugin like <a href=\"//github.com/matiasgagliano/bifrost\" rel=\"noreferrer\">Bifröst</a> which uses the <em>iframe technique</em> but also provides a <a href=\"//api.jquery.com/jQuery.ajaxTransport\" rel=\"noreferrer\">jQuery Ajax transport</a> allowing to <strong>send files</strong> with just the <code>$.ajax()</code> method like this:</p>\n\n<pre><code>$.ajax({\n  url: 'file/destination.html', \n  type: 'POST',\n  // Set the transport to use (iframe means to use Bifröst)\n  // and the expected data type (json in this case).\n  dataType: 'iframe json',                                \n  fileInputs: $('input[type=\"file\"]'),  // The file inputs containing the files to send.\n  data: { msg: 'Some extra data you might need.'}\n}).done(function(){\n  console.log(\"Success: Files sent!\");\n}).fail(function(){\n  console.log(\"An error occurred, the files couldn't be sent!\");\n});\n</code></pre>\n\n<h2>Plugins</h2>\n\n<p><a href=\"//github.com/matiasgagliano/bifrost\" rel=\"noreferrer\">Bifröst</a> is just a small wrapper that adds fallback support to jQuery's ajax method, but many of the aforementioned plugins like <a href=\"//malsup.com/jquery/form/\" rel=\"noreferrer\">jQuery Form Plugin</a> or <a href=\"//github.com/blueimp/jQuery-File-Upload\" rel=\"noreferrer\">jQuery File Upload</a> include the whole stack from HTML5 to different fallbacks and some useful features to ease out the process. Depending on your needs and requirements you might want to consider a bare implementation or either of this plugins.</p>\n"},{"score":8,"body":"<p>Look for <em>Handling the upload process for a file, asynchronously</em> in here:\n<a href=\"https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications\" rel=\"noreferrer\">https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications</a></p>\n\n<p>Sample from the link</p>\n\n<pre><code>&lt;?php\nif (isset($_FILES['myFile'])) {\n    // Example:\n    move_uploaded_file($_FILES['myFile']['tmp_name'], \"uploads/\" . $_FILES['myFile']['name']);\n    exit;\n}\n?&gt;&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;dnd binary upload&lt;/title&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n    &lt;script type=\"text/javascript\"&gt;\n        function sendFile(file) {\n            var uri = \"/index.php\";\n            var xhr = new XMLHttpRequest();\n            var fd = new FormData();\n\n            xhr.open(\"POST\", uri, true);\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) {\n                    // Handle response.\n                    alert(xhr.responseText); // handle response.\n                }\n            };\n            fd.append('myFile', file);\n            // Initiate a multipart/form-data upload\n            xhr.send(fd);\n        }\n\n        window.onload = function() {\n            var dropzone = document.getElementById(\"dropzone\");\n            dropzone.ondragover = dropzone.ondragenter = function(event) {\n                event.stopPropagation();\n                event.preventDefault();\n            }\n\n            dropzone.ondrop = function(event) {\n                event.stopPropagation();\n                event.preventDefault();\n\n                var filesArray = event.dataTransfer.files;\n                for (var i=0; i&lt;filesArray.length; i++) {\n                    sendFile(filesArray[i]);\n                }\n            }\n        }\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div&gt;\n        &lt;div id=\"dropzone\" style=\"margin:30px; width:500px; height:300px; border:1px dotted grey;\"&gt;Drag &amp; drop your file here...&lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"score":19,"body":"<pre><code>var formData=new FormData();\nformData.append(\"fieldname\",\"value\");\nformData.append(\"image\",$('[name=\"filename\"]')[0].files[0]);\n\n$.ajax({\n    url:\"page.php\",\n    data:formData,\n    type: 'POST',\n    dataType:\"JSON\",\n    cache: false,\n    contentType: false,\n    processData: false,\n    success:function(data){ }\n});\n</code></pre>\n\n<p>You can use form data to post all your values including images.</p>\n"},{"score":7,"body":"<p>This is my solution.</p>\n\n<pre><code>&lt;form enctype=\"multipart/form-data\"&gt;    \n\n    &lt;div class=\"form-group\"&gt;\n        &lt;label class=\"control-label col-md-2\" for=\"apta_Description\"&gt;Description&lt;/label&gt;\n        &lt;div class=\"col-md-10\"&gt;\n            &lt;input class=\"form-control text-box single-line\" id=\"apta_Description\" name=\"apta_Description\" type=\"text\" value=\"\"&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;input name=\"file\" type=\"file\" /&gt;\n    &lt;input type=\"button\" value=\"Upload\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>and the js</p>\n\n<pre><code>&lt;script&gt;\n\n    $(':button').click(function () {\n        var formData = new FormData($('form')[0]);\n        $.ajax({\n            url: '@Url.Action(\"Save\", \"Home\")',  \n            type: 'POST',                \n            success: completeHandler,\n            data: formData,\n            cache: false,\n            contentType: false,\n            processData: false\n        });\n    });    \n\n    function completeHandler() {\n        alert(\":)\");\n    }    \n&lt;/script&gt;\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>[HttpPost]\npublic ActionResult Save(string apta_Description, HttpPostedFileBase file)\n{\n    [...]\n}\n</code></pre>\n"},{"score":25,"body":"<p>Here's just another solution of how to upload file (<strong>without any plugin</strong>) </p>\n\n<p>Using simple <strong>Javascripts</strong> and <strong>AJAX</strong> (with progress-bar)</p>\n\n<p><strong>HTML part</strong></p>\n\n<pre><code>&lt;form id=\"upload_form\" enctype=\"multipart/form-data\" method=\"post\"&gt;\n    &lt;input type=\"file\" name=\"file1\" id=\"file1\"&gt;&lt;br&gt;\n    &lt;input type=\"button\" value=\"Upload File\" onclick=\"uploadFile()\"&gt;\n    &lt;progress id=\"progressBar\" value=\"0\" max=\"100\" style=\"width:300px;\"&gt;&lt;/progress&gt;\n    &lt;h3 id=\"status\"&gt;&lt;/h3&gt;\n    &lt;p id=\"loaded_n_total\"&gt;&lt;/p&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p><strong>JS part</strong></p>\n\n<pre><code>function _(el){\n    return document.getElementById(el);\n}\nfunction uploadFile(){\n    var file = _(\"file1\").files[0];\n    // alert(file.name+\" | \"+file.size+\" | \"+file.type);\n    var formdata = new FormData();\n    formdata.append(\"file1\", file);\n    var ajax = new XMLHttpRequest();\n    ajax.upload.addEventListener(\"progress\", progressHandler, false);\n    ajax.addEventListener(\"load\", completeHandler, false);\n    ajax.addEventListener(\"error\", errorHandler, false);\n    ajax.addEventListener(\"abort\", abortHandler, false);\n    ajax.open(\"POST\", \"file_upload_parser.php\");\n    ajax.send(formdata);\n}\nfunction progressHandler(event){\n    _(\"loaded_n_total\").innerHTML = \"Uploaded \"+event.loaded+\" bytes of \"+event.total;\n    var percent = (event.loaded / event.total) * 100;\n    _(\"progressBar\").value = Math.round(percent);\n    _(\"status\").innerHTML = Math.round(percent)+\"% uploaded... please wait\";\n}\nfunction completeHandler(event){\n    _(\"status\").innerHTML = event.target.responseText;\n    _(\"progressBar\").value = 0;\n}\nfunction errorHandler(event){\n    _(\"status\").innerHTML = \"Upload Failed\";\n}\nfunction abortHandler(event){\n    _(\"status\").innerHTML = \"Upload Aborted\";\n}\n</code></pre>\n\n<p><strong>PHP part</strong></p>\n\n<pre><code>&lt;?php\n$fileName = $_FILES[\"file1\"][\"name\"]; // The file name\n$fileTmpLoc = $_FILES[\"file1\"][\"tmp_name\"]; // File in the PHP tmp folder\n$fileType = $_FILES[\"file1\"][\"type\"]; // The type of file it is\n$fileSize = $_FILES[\"file1\"][\"size\"]; // File size in bytes\n$fileErrorMsg = $_FILES[\"file1\"][\"error\"]; // 0 for false... and 1 for true\nif (!$fileTmpLoc) { // if file not chosen\n    echo \"ERROR: Please browse for a file before clicking the upload button.\";\n    exit();\n}\nif(move_uploaded_file($fileTmpLoc, \"test_uploads/$fileName\")){ // assuming the directory name 'test_uploads'\n    echo \"$fileName upload is complete\";\n} else {\n    echo \"move_uploaded_file function failed\";\n}\n?&gt;\n</code></pre>\n\n<p><a href=\"https://github.com/SiddharthaChowdhury/Async-File-Upload-using-PHP-Javascript-AJAX\" rel=\"noreferrer\"><strong>Here's the EXAMPLE application</strong></a></p>\n"},{"score":11,"body":"<p>You can see a solved solution with a working demo <a href=\"http://whats-online.info/science-and-tutorials/30/select-preview-rename-and-upload-image-using-jquery-Ajax/\" rel=\"noreferrer\"><strong>here</strong></a> that allows you to preview and submit form files to the server. For your case, you need to use <a href=\"http://en.wikipedia.org/wiki/Ajax_%28programming%29\" rel=\"noreferrer\">Ajax</a> to facilitate the file upload to the server:</p>\n\n<pre><code>&lt;from action=\"\" id=\"formContent\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n    &lt;span&gt;File&lt;/span&gt;\n    &lt;input type=\"file\" id=\"file\" name=\"file\" size=\"10\"/&gt;\n    &lt;input id=\"uploadbutton\" type=\"button\" value=\"Upload\"/&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The data being submitted is a formdata. On your jQuery, use a form submit function instead of a button click to submit the form file as shown below.</p>\n\n<pre><code>$(document).ready(function () {\n   $(\"#formContent\").submit(function(e){\n\n     e.preventDefault();\n     var formdata = new FormData(this);\n\n $.ajax({\n     url: \"ajax_upload_image.php\",\n     type: \"POST\",\n     data: formdata,\n     mimeTypes:\"multipart/form-data\",\n     contentType: false,\n     cache: false,\n     processData: false,\n     success: function(){\n\n     alert(\"successfully submitted\");\n\n     });\n   });\n});\n</code></pre>\n\n<p><a href=\"http://whats-online.info/science-and-tutorials/30/select-preview-rename-and-upload-image-using-jquery-Ajax/\" rel=\"noreferrer\">View more details</a></p>\n"},{"score":11,"body":"<p>Sample: If you use jQuery, you can do easy to an upload file. This is a small and strong jQuery plugin, <a href=\"http://jquery.malsup.com/form/\" rel=\"noreferrer\">http://jquery.malsup.com/form/</a>.</p>\n<h3>Example</h3>\n<pre><code>var $bar   = $('.ProgressBar');\n$('.Form').ajaxForm({\n  dataType: 'json',\n\n  beforeSend: function(xhr) {\n    var percentVal = '0%';\n    $bar.width(percentVal);\n  },\n\n  uploadProgress: function(event, position, total, percentComplete) {\n    var percentVal = percentComplete + '%';\n    $bar.width(percentVal)\n  },\n\n  success: function(response) {\n    // Response\n  }\n});\n</code></pre>\n<p><strong>I hope it would be helpful</strong></p>\n"},{"score":3,"body":"<p>It is an old question, but still has no answer correct answer, so:</p>\n\n<p>Have you tried <a href=\"https://github.com/blueimp/jQuery-File-Upload/wiki/Submit-files-asynchronously\" rel=\"nofollow noreferrer\">jQuery-File-Upload</a>?</p>\n\n<p>Here is an example from the link above that might solve your problem:</p>\n\n<pre><code>$('#fileupload').fileupload({\n    add: function (e, data) {\n        var that = this;\n        $.getJSON('/example/url', function (result) {\n            data.formData = result; // e.g. {id: 123}\n            $.blueimp.fileupload.prototype\n                .options.add.call(that, e, data);\n        });\n    } \n});\n</code></pre>\n"},{"score":6,"body":"<p>Using <strong>HTML5</strong> and <strong>JavaScript</strong>, uploading async is quite easy, I create the uploading logic along with your html, this is not fully working as it needs the api, but demonstrate how it works, if you have the endpoint called <code>/upload</code> from root of your website, this code should work for you:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const asyncFileUpload = () =&gt; {\n  const fileInput = document.getElementById(\"file\");\n  const file = fileInput.files[0];\n  const uri = \"/upload\";\n  const xhr = new XMLHttpRequest();\n  xhr.upload.onprogress = e =&gt; {\n    const percentage = e.loaded / e.total;\n    console.log(percentage);\n  };\n  xhr.onreadystatechange = e =&gt; {\n    if (xhr.readyState === 4 &amp;&amp; xhr.status === 200) {\n      console.log(\"file uploaded\");\n    }\n  };\n  xhr.open(\"POST\", uri, true);\n  xhr.setRequestHeader(\"X-FileName\", file.name);\n  xhr.send(file);\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;form&gt;\n  &lt;span&gt;File&lt;/span&gt;\n  &lt;input type=\"file\" id=\"file\" name=\"file\" size=\"10\" /&gt;\n  &lt;input onclick=\"asyncFileUpload()\" id=\"upload\" type=\"button\" value=\"Upload\" /&gt;\n&lt;/form&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Also some further information about XMLHttpReques:</p>\n<blockquote>\n<p><strong>The XMLHttpRequest Object</strong></p>\n<p>All modern browsers support the XMLHttpRequest object.\nThe XMLHttpRequest object can be used to exchange data with a web\nserver behind the scenes. This means that it is possible to update\nparts of a web page, without reloading the whole page.</p>\n</blockquote>\n<br>\n<blockquote>\n<p><strong>Create an XMLHttpRequest Object</strong></p>\n<p>All modern browsers (Chrome, Firefox,\nIE7+, Edge, Safari, Opera) have a built-in XMLHttpRequest object.</p>\n<p>Syntax for creating an XMLHttpRequest object:</p>\n<p>variable = new XMLHttpRequest();</p>\n</blockquote>\n<br> \n<blockquote>\n<p><strong>Access Across Domains</strong></p>\n<p>For security reasons, modern browsers do not\nallow access across domains.</p>\n<p>This means that both the web page and the XML file it tries to load,\nmust be located on the same server.</p>\n<p>The examples on W3Schools all open XML files located on the W3Schools\ndomain.</p>\n<p>If you want to use the example above on one of your own web pages, the\nXML files you load must be located on your own server.</p>\n</blockquote>\n<p>For more details, you can continue reading <a href=\"https://www.w3schools.com/js/js_ajax_http.asp\" rel=\"nofollow noreferrer\">here</a>...</p>\n"},{"score":6,"body":"<p>You can use <strong>newer</strong> <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\" rel=\"noreferrer\">Fetch API</a> by JavaScript. Like this:                             </p>\n\n<pre><code>function uploadButtonCLicked(){\n    var input = document.querySelector('input[type=\"file\"]')\n\n    fetch('/url', {\n      method: 'POST',\n      body: input.files[0]\n    }).then(res =&gt; res.json())   // you can do something with response\n      .catch(error =&gt; console.error('Error:', error))\n      .then(response =&gt; console.log('Success:', response));\n}                               \n</code></pre>\n\n<p><strong>Advantage:</strong> Fetch API is <strong>natively supported</strong> by all modern browsers, so you don't have to import anything. Also, note that fetch() returns a <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\" rel=\"noreferrer\">Promise</a> which is then handled by using <code>.then(..code to handle response..)</code> asynchronously. </p>\n"},{"score":14,"body":"<p>A modern approach <strong>without Jquery</strong> is to use the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/FileList\" rel=\"noreferrer\">FileList</a> object you get back from <code>&lt;input type=\"file\"&gt;</code> when user selects a file(s) and then use <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\" rel=\"noreferrer\">Fetch</a> to post the FileList wrapped around a <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/FormData\" rel=\"noreferrer\">FormData</a> object.</p>\n\n<pre><code>// The input DOM element // &lt;input type=\"file\"&gt;\nconst inputElement = document.querySelector('input[type=file]');\n\n// Listen for a file submit from user\ninputElement.addEventListener('change', () =&gt; {\n    const data = new FormData();\n    data.append('file', inputElement.files[0]);\n    data.append('imageName', 'flower');\n\n    // You can then post it to your server.\n    // Fetch can accept an object of type FormData on its  body\n    fetch('/uploadImage', {\n        method: 'POST',\n        body: data\n    });\n});\n</code></pre>\n"},{"score":4,"body":"<p>You can do the Asynchronous Multiple File uploads using JavaScript or jQuery and that to without using any plugin. You can also show the real time progress of file upload in the progress control. I have come across 2 nice links -</p>\n\n<ol>\n<li><a href=\"http://www.yogihosting.com/multi-file-upload-with-progress-bar-in-asp-net/\" rel=\"nofollow noreferrer\">ASP.NET Web Forms based Mulitple File Upload Feature with Progress Bar</a></li>\n<li><a href=\"http://www.yogihosting.com/jquery-file-upload/\" rel=\"nofollow noreferrer\">ASP.NET MVC based Multiple File Upload made in jQuery</a></li>\n</ol>\n\n<p>The server side language is C# but you can do some modification for making it work with other language like PHP.</p>\n\n<p><strong>File Upload ASP.NET Core MVC:</strong></p>\n\n<p>In the View create file upload control in html:</p>\n\n<pre><code>&lt;form method=\"post\" asp-action=\"Add\" enctype=\"multipart/form-data\"&gt;\n    &lt;input type=\"file\" multiple name=\"mediaUpload\" /&gt;\n    &lt;button type=\"submit\"&gt;Submit&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Now create action method in your controller:</p>\n\n<pre><code>[HttpPost]\npublic async Task&lt;IActionResult&gt; Add(IFormFile[] mediaUpload)\n{\n    //looping through all the files\n    foreach (IFormFile file in mediaUpload)\n    {\n        //saving the files\n        string path = Path.Combine(hostingEnvironment.WebRootPath, \"some-folder-path\"); \n        using (var stream = new FileStream(path, FileMode.Create))\n        {\n            await file.CopyToAsync(stream);\n        }\n    }\n}\n</code></pre>\n\n<p>hostingEnvironment variable is of type IHostingEnvironment which can be injected to the controller using dependency injection, like:</p>\n\n<pre><code>private IHostingEnvironment hostingEnvironment;\npublic MediaController(IHostingEnvironment environment)\n{\n    hostingEnvironment = environment;\n}\n</code></pre>\n"},{"score":4,"body":"<p>For PHP, look for <a href=\"https://developer.hyvor.com/php/image-upload-ajax-php-mysql\" rel=\"nofollow noreferrer\">https://developer.hyvor.com/php/image-upload-ajax-php-mysql</a></p>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Image Upload with AJAX, PHP and MYSQL&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;form onsubmit=\"submitForm(event);\"&gt;\n    &lt;input type=\"file\" name=\"image\" id=\"image-selecter\" accept=\"image/*\"&gt;\n    &lt;input type=\"submit\" name=\"submit\" value=\"Upload Image\"&gt;\n&lt;/form&gt;\n&lt;div id=\"uploading-text\" style=\"display:none;\"&gt;Uploading...&lt;/div&gt;\n&lt;img id=\"preview\"&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>JAVASCRIPT</strong></p>\n\n<pre><code>var previewImage = document.getElementById(\"preview\"),  \n    uploadingText = document.getElementById(\"uploading-text\");\n\nfunction submitForm(event) {\n    // prevent default form submission\n    event.preventDefault();\n    uploadImage();\n}\n\nfunction uploadImage() {\n    var imageSelecter = document.getElementById(\"image-selecter\"),\n        file = imageSelecter.files[0];\n    if (!file) \n        return alert(\"Please select a file\");\n    // clear the previous image\n    previewImage.removeAttribute(\"src\");\n    // show uploading text\n    uploadingText.style.display = \"block\";\n    // create form data and append the file\n    var formData = new FormData();\n    formData.append(\"image\", file);\n    // do the ajax part\n    var ajax = new XMLHttpRequest();\n    ajax.onreadystatechange = function() {\n        if (this.readyState === 4 &amp;&amp; this.status === 200) {\n            var json = JSON.parse(this.responseText);\n            if (!json || json.status !== true) \n                return uploadError(json.error);\n\n            showImage(json.url);\n        }\n    }\n    ajax.open(\"POST\", \"upload.php\", true);\n    ajax.send(formData); // send the form data\n}\n</code></pre>\n\n<p><strong>PHP</strong></p>\n\n<pre><code>&lt;?php\n$host = 'localhost';\n$user = 'user';\n$password = 'password';\n$database = 'database';\n$mysqli = new mysqli($host, $user, $password, $database);\n\n\n try {\n    if (empty($_FILES['image'])) {\n        throw new Exception('Image file is missing');\n    }\n    $image = $_FILES['image'];\n    // check INI error\n    if ($image['error'] !== 0) {\n        if ($image['error'] === 1) \n            throw new Exception('Max upload size exceeded');\n\n        throw new Exception('Image uploading error: INI Error');\n    }\n    // check if the file exists\n    if (!file_exists($image['tmp_name']))\n        throw new Exception('Image file is missing in the server');\n    $maxFileSize = 2 * 10e6; // in bytes\n    if ($image['size'] &gt; $maxFileSize)\n        throw new Exception('Max size limit exceeded'); \n    // check if uploaded file is an image\n    $imageData = getimagesize($image['tmp_name']);\n    if (!$imageData) \n        throw new Exception('Invalid image');\n    $mimeType = $imageData['mime'];\n    // validate mime type\n    $allowedMimeTypes = ['image/jpeg', 'image/png', 'image/gif'];\n    if (!in_array($mimeType, $allowedMimeTypes)) \n        throw new Exception('Only JPEG, PNG and GIFs are allowed');\n\n    // nice! it's a valid image\n    // get file extension (ex: jpg, png) not (.jpg)\n    $fileExtention = strtolower(pathinfo($image['name'] ,PATHINFO_EXTENSION));\n    // create random name for your image\n    $fileName = round(microtime(true)) . mt_rand() . '.' . $fileExtention; // anyfilename.jpg\n    // Create the path starting from DOCUMENT ROOT of your website\n    $path = '/examples/image-upload/images/' . $fileName;\n    // file path in the computer - where to save it \n    $destination = $_SERVER['DOCUMENT_ROOT'] . $path;\n\n    if (!move_uploaded_file($image['tmp_name'], $destination))\n        throw new Exception('Error in moving the uploaded file');\n\n    // create the url\n    $protocol = stripos($_SERVER['SERVER_PROTOCOL'],'https') === true ? 'https://' : 'http://';\n    $domain = $protocol . $_SERVER['SERVER_NAME'];\n    $url = $domain . $path;\n    $stmt = $mysqli -&gt; prepare('INSERT INTO image_uploads (url) VALUES (?)');\n    if (\n        $stmt &amp;&amp;\n        $stmt -&gt; bind_param('s', $url) &amp;&amp;\n        $stmt -&gt; execute()\n    ) {\n        exit(\n            json_encode(\n                array(\n                    'status' =&gt; true,\n                    'url' =&gt; $url\n                )\n            )\n        );\n    } else \n        throw new Exception('Error in saving into the database');\n\n} catch (Exception $e) {\n    exit(json_encode(\n        array (\n            'status' =&gt; false,\n            'error' =&gt; $e -&gt; getMessage()\n        )\n    ));\n}\n</code></pre>\n"},{"score":9,"body":"<p>You can pass additional parameters along with file name on making asynchronous upload using XMLHttpRequest (without flash and iframe dependency). Append the additional parameter value with FormData and send the upload request.</p>\n\n<hr>\n\n<pre><code>var formData = new FormData();\nformData.append('parameter1', 'value1');\nformData.append('parameter2', 'value2'); \nformData.append('file', $('input[type=file]')[0].files[0]);\n\n$.ajax({\n    url: 'post back url',\n    data: formData,\n// other attributes of AJAX\n});\n</code></pre>\n\n<hr>\n\n<p>Also, Syncfusion JavaScript UI file upload provides solution for this scenario simply using event argument. you can find documentation <a href=\"https://ej2.syncfusion.com/documentation/uploader/how-to/#add-additional-data-on-upload\" rel=\"noreferrer\">here</a> and further details about this control here enter link description <a href=\"https://www.syncfusion.com/javascript-ui-controls/file-upload\" rel=\"noreferrer\">here</a></p>\n"},{"score":4,"body":"<p>You could also consider using something like <a href=\"https://uppy.io\" rel=\"nofollow noreferrer\">https://uppy.io</a>.</p>\n\n<p>It does file uploading without navigating away from the page and offers a few bonuses like drag &amp; drop, resuming uploads in case of browser crashes/flaky networks, and importing from e.g. Instagram.\nIt's open source and does not rely on jQuery/React/Angular/Vue, but can be used with it. Disclaimer: as its creator I'm biased ;)</p>\n"},{"score":3,"body":"<p>You can use the following code.</p>\n\n<pre><code>async: false(true)\n</code></pre>\n"},{"score":4,"body":"<p>Try</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>async function saveFile() \r\n{\r\n    let formData = new FormData();           \r\n    formData.append(\"file\", file.files[0]);\r\n    await fetch('addFile.do', {method: \"POST\", body: formData});    \r\n    alert(\"Data Uploaded: \");\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;span&gt;File&lt;/span&gt;\r\n&lt;input type=\"file\" id=\"file\" name=\"file\" size=\"10\"/&gt;\r\n&lt;input type=\"button\" value=\"Upload\" onclick=\"saveFile()\"/&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The <code>content-type='multipart/form-data'</code> is set by browser automatically, the file name is added automatically too to <code>filename</code> FormData parameter (and can be easy read by server). Here is more developed example with err handling and json adding</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>async function saveFile(inp) \r\n{\r\n    let user = { name:'john', age:34 };\r\n    let formData = new FormData();\r\n    let photo = inp.files[0];      \r\n         \r\n    formData.append(\"photo\", photo);\r\n    formData.append(\"user\", JSON.stringify(user));  \r\n    \r\n    try {\r\n       let r = await fetch('/upload/image', {method: \"POST\", body: formData}); \r\n       console.log('HTTP response code:',r.status); \r\n       alert('success');\r\n    } catch(e) {\r\n       console.log('Huston we have problem...:', e);\r\n    }\r\n    \r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;input type=\"file\" onchange=\"saveFile(this)\" &gt;\r\n&lt;br&gt;&lt;br&gt;\r\nBefore selecting the file Open chrome console &gt; network tab to see the request details.\r\n&lt;br&gt;&lt;br&gt;\r\n&lt;small&gt;Because in this example we send request to https://stacksnippets.net/upload/image the response code will be 404 ofcourse...&lt;/small&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"score":2,"body":"<p>What if using promises which ajax and checking if the file is valid and well saved in your backend, so you can use some animation in front while user is navigating thought your page.</p>\n\n<p>You can even make it paralel upload or stacking with recursive approach</p>\n"}],"score":2979}